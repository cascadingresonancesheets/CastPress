const payments=document.querySelectorAll(".billing-radio"),billingForms=document.querySelectorAll(".billing-radio__form"),billingFormsItems=document.querySelectorAll(".billing-radio__form input"),cSelects=(0<payments.length&&(payments.forEach(e=>{var t=e.querySelector(".custom-radio__input");let r=e.querySelector(".billing-radio__form"),s=e.querySelectorAll("input");t.onclick=function(){billingForms.forEach(e=>{e.style.display="none"}),r.style.display="flex",billingFormsItems.forEach(e=>{e.removeAttribute("form")}),s.forEach(e=>{e.setAttribute("form","billing-form")})}}),payments[0].querySelector(".custom-radio__input").click()),document.querySelectorAll(".custom-select")),humb=(cSelects.forEach(e=>{let r=e.querySelector("select").querySelectorAll("option"),t=document.createElement("DIV"),s=(t.setAttribute("class","custom-select__selected"),e.appendChild(t),e.querySelector(".custom-select__selected"));var o=document.createElement("DIV");o.setAttribute("class","custom-select__items"),e.appendChild(o);let c=e.querySelector(".custom-select__items"),l=0,a=(r.forEach(e=>{var t=document.createElement("DIV");t.setAttribute("class","custom-select__item"),t.setAttribute("data-index",l++),t.innerHTML=e.innerHTML,c.appendChild(t)}),c.querySelectorAll(".custom-select__item")),n=0;r.forEach(e=>{1==e.selected&&(a[n].classList.add("custom-select__item_is-selected"),t.innerHTML=r[n].innerHTML),n++}),s.addEventListener("click",function(){cSelects.forEach(e=>{e.querySelector(".custom-select__selected")!==this&&(e.querySelector(".custom-select__selected").classList.remove("custom-select__selected_is-open"),e.querySelector(".custom-select__items").classList.remove("custom-select__items_is-open"))}),this.classList.toggle("custom-select__selected_is-open"),this.nextElementSibling.classList.toggle("custom-select__items_is-open")}),c.addEventListener("click",function(e){var t;e.target.classList.contains("custom-select__item")&&(t=e.target.innerHTML,s.innerHTML=t,t=e.target.dataset.index,r[t].selected="selected",a.forEach(e=>{e.classList.remove("custom-select__item_is-selected")}),e.target.classList.add("custom-select__item_is-selected"),e.target.parentNode.classList.remove("custom-select__items_is-open"),e.target.parentNode.previousElementSibling.classList.remove("custom-select__selected_is-open"))})}),document.addEventListener("click",e=>{e.target.closest(".custom-select")||document.querySelectorAll(".custom-select").forEach(e=>{e.querySelector(".custom-select__selected").classList.remove("custom-select__selected_is-open"),e.querySelector(".custom-select__items").classList.remove("custom-select__items_is-open")})}),document.querySelector(".humb")),topnav=document.querySelector(".topnav"),searchBtn=(humb.onclick=function(){humb.classList.toggle("humb_is-open"),topnav.classList.toggle("topnav_is-open")},document.addEventListener("click",e=>{e.target.closest(".header")||e.target.closest(".humb")||(humb.classList.remove("humb_is-open"),topnav.classList.remove("topnav_is-open"))}),document.querySelector(".search-icon")),searchCross=document.querySelector(".search-icon__cross"),searchSvg=document.querySelector(".search-icon__svg"),searchField=document.querySelector(".header-search"),subMenus=(searchBtn.onclick=function(){searchField.classList.toggle("header-search_active"),searchCross.classList.toggle("search-icon__cross_active"),searchSvg.classList.toggle("search-icon__svg_hidden")},document.addEventListener("click",e=>{e.target.closest(".header-search")||e.target.closest(".search-icon")||(searchField.classList.remove("header-search_active"),searchCross.classList.remove("search-icon__cross_active"),searchSvg.classList.remove("search-icon__svg_hidden"))}),document.querySelectorAll(".topnav__item_has-submenu")),player=(subMenus.forEach(e=>{let t=e.querySelector(".submenu-toggle"),r=e.querySelector(".topnav__submenu");t.onclick=function(){t.classList.toggle("submenu-toggle_open"),r.classList.toggle("topnav__submenu_is-open")}}),window.addEventListener("resize",()=>{subMenus.forEach(e=>{var t=e.querySelector(".submenu-toggle"),e=e.querySelector(".topnav__submenu");t.classList.remove("submenu-toggle_open"),e.classList.remove("topnav__submenu_is-open")}),humb.classList.remove("humb_is-open"),topnav.classList.remove("topnav_is-open")}),document.getElementById("player")),playerPlay=document.querySelector(".player__play"),playerPlaySVG=document.querySelector(".player__play-svg"),playerPauseSVG=document.querySelector(".player__pause-svg"),playerCurrentTime=document.querySelector(".player__current-time"),playerPlayTime=document.querySelector(".player__play-time"),playerProgressBar=document.querySelector(".player__progress-bar"),playerProgress=document.querySelector(".player__progress"),playerVolume=document.querySelector(".player__volume"),playerVolumeSVG=document.querySelector(".player__volume-svg"),playerVolumeMutedSVG=document.querySelector(".player__volume_muted-svg"),playerVolumeBar=document.querySelector(".player__volume-bar"),playerVolumeValue=document.querySelector(".player__volume-value");if(player){let t=setInterval(()=>{},500);function timePrettier(e){let t=Math.floor(e/60),r=e-60*(t=1==t.toString().length?"0"+t:t);return 1==r.toString().length&&(r="0"+r),t+":"+r}function getRelativeCoordinates(e,t){const r=e.pageX;e.pageY;var s={left:t.offsetLeft,top:t.offsetTop};let o=t.offsetParent;for(;o;)s.left+=o.offsetLeft,s.top+=o.offsetTop,o=o.offsetParent;return r-s.left}function getRelativeCoordinatesV(e,t){e.pageX;const r=e.pageY;var s={left:t.offsetLeft,top:t.offsetTop};let o=t.offsetParent;for(;o;)s.left+=o.offsetLeft,s.top+=o.offsetTop,o=o.offsetParent;return r-s.top}clearInterval(t),player.addEventListener("loadedmetadata",function(){playerPlayTime.innerHTML=timePrettier(Math.round(player.duration))}),player.addEventListener("ended",function(){playerPlaySVG.classList.add("player__play-svg_is-active"),playerPauseSVG.classList.remove("player__pause-svg_is-active")}),playerPlay.onclick=function(){function e(){playerPlaySVG.classList.toggle("player__play-svg_is-active"),playerPauseSVG.classList.toggle("player__pause-svg_is-active")}player.paused?(player.play(),e(),t=setInterval(()=>{var e=Math.round(player.currentTime);playerCurrentTime.innerHTML=timePrettier(e),playerProgress.style.width=e/(player.duration/100)+"%"},500)):(player.pause(),e(),clearInterval(t))},playerProgressBar.addEventListener("click",e=>{playerProgress.style.width=getRelativeCoordinates(e,e.target)+"px",player.currentTime=player.duration/100*(getRelativeCoordinates(e,e.target)/(playerProgressBar.offsetWidth/100));e=Math.round(player.currentTime);playerCurrentTime.innerHTML=timePrettier(e)}),playerVolume.onclick=function(){playerVolumeSVG.classList.toggle("player__volume-svg_is-active"),playerVolumeMutedSVG.classList.toggle("player__volume_muted-svg_is-active"),player.muted?player.muted=!1:player.muted=!0},playerVolumeBar.addEventListener("click",e=>{playerVolumeValue.style.height=70-getRelativeCoordinatesV(e,playerVolumeBar)+"px",player.volume=1-playerVolumeValue.offsetTop/(playerVolumeBar.offsetTop/100)/-100})}Share={vkontakte:function(e,t,r,s){url="http://vkontakte.ru/share.php?",url=(url=(url=(url+="url="+encodeURIComponent(e))+"&title="+encodeURIComponent(t))+"&description="+encodeURIComponent(s))+"&image="+encodeURIComponent(r)+"&noparse=true",Share.popup(url)},facebook:function(e,t,r,s){url="http://www.facebook.com/sharer.php?s=100",url=(url=(url=(url+="&p[title]="+encodeURIComponent(t))+"&p[summary]="+encodeURIComponent(s))+"&p[url]="+encodeURIComponent(e))+"&p[images][0]="+encodeURIComponent(r),Share.popup(url)},twitter:function(e,t){url="http://twitter.com/share?",url=(url=(url+="text="+encodeURIComponent(t))+"&url="+encodeURIComponent(e))+"&counturl="+encodeURIComponent(e),Share.popup(url)},popup:function(e){window.open(e,"","toolbar=0,status=0,width=626,height=436")}};const productBtns=Array.from(document.querySelectorAll(".product-tabs__btn")),productTabs=Array.from(document.querySelectorAll(".product-descr__item")),productReview=document.querySelector(".rating__link");function reviewClick(e,t){e.map(e=>{e.classList.remove("product-descr__item_active"),"review"===e.id&&e.classList.add("product-descr__item_active")}),t.map(e=>{e.classList.remove("product-tabs__btn_active"),"review"===e.dataset.tab&&e.classList.add("product-tabs__btn_active")})}productReview&&productReview.addEventListener("click",function(){reviewClick(productTabs,productBtns)}),productBtns.map(t=>{t.addEventListener("click",function(){productTabs.map(e=>{e.classList.remove("product-descr__item_active"),t.dataset.tab===e.id&&e.classList.add("product-descr__item_active")}),productBtns.map(e=>{e.classList.remove("product-tabs__btn_active"),this.classList.add("product-tabs__btn_active")})})});const accBtns=Array.from(document.querySelectorAll(".account-tabs__btn")),accTabs=Array.from(document.querySelectorAll(".account-item"));accBtns.map(t=>{t.addEventListener("click",function(){accTabs.map(e=>{e.classList.add("account-item_hidden"),t.dataset.tab===e.id&&e.classList.remove("account-item_hidden")}),accBtns.map(e=>{e.classList.remove("account-tabs__btn_active"),this.classList.add("account-tabs__btn_active")})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJpbGxpbmcuanMiLCJjdXN0b20tc2VsZWN0LmpzIiwibWVudS5qcyIsInBsYXllci5qcyIsInNoYXJlLmpzIiwidGFicy5qcyJdLCJuYW1lcyI6WyJwYXltZW50cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImJpbGxpbmdGb3JtcyIsImJpbGxpbmdGb3Jtc0l0ZW1zIiwiY1NlbGVjdHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwibGV0IiwicmFkaW8iLCJlbCIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JtIiwiaW5wdXRzIiwib25jbGljayIsInN0eWxlIiwiZGlzcGxheSIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImNsaWNrIiwiaHVtYiIsIm9wdGlvbnMiLCJjU2VsZWN0IiwiYSIsImNyZWF0ZUVsZW1lbnQiLCJuZXdTZWxlY3QiLCJhcHBlbmRDaGlsZCIsImIiLCJuZXdPcHRpb25zV3JhcCIsImkiLCJuZXdPcHRpb25zIiwiaW5uZXJIVE1MIiwib3B0aW9uIiwiaiIsInNlbGVjdGVkIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRoaXMiLCJyZW1vdmUiLCJ0b2dnbGUiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJlIiwiaW5kZXgiLCJ0YXJnZXQiLCJjb250YWlucyIsInZhbHVlIiwiZGF0YXNldCIsIm5ld09wdGlvbiIsInBhcmVudE5vZGUiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiY2xvc2VzdCIsInRvcG5hdiIsInNlYXJjaEJ0biIsInNlYXJjaENyb3NzIiwic2VhcmNoU3ZnIiwic2VhcmNoRmllbGQiLCJzdWJNZW51cyIsInBsYXllciIsInN1Yk1lbnVCdG4iLCJzdWJNZW51IiwibWVudSIsIndpbmRvdyIsImdldEVsZW1lbnRCeUlkIiwicGxheWVyUGxheSIsInBsYXllclBsYXlTVkciLCJwbGF5ZXJQYXVzZVNWRyIsInBsYXllckN1cnJlbnRUaW1lIiwicGxheWVyUGxheVRpbWUiLCJwbGF5ZXJQcm9ncmVzc0JhciIsInBsYXllclByb2dyZXNzIiwicGxheWVyVm9sdW1lIiwicGxheWVyVm9sdW1lU1ZHIiwicGxheWVyVm9sdW1lTXV0ZWRTVkciLCJwbGF5ZXJWb2x1bWVCYXIiLCJwbGF5ZXJWb2x1bWVWYWx1ZSIsImN1cnJlbnRUaW1lIiwic2V0SW50ZXJ2YWwiLCJ0aW1lUHJldHRpZXIiLCJ0aW1lIiwibWludXRlcyIsIk1hdGgiLCJmbG9vciIsInNlY29uZHMiLCJ0b1N0cmluZyIsImdldFJlbGF0aXZlQ29vcmRpbmF0ZXMiLCJldmVudCIsInJlZmVyZW5jZUVsZW1lbnQiLCJwb3NpdGlvbiIsInBhZ2VYIiwicGFnZVkiLCJvZmZzZXQiLCJsZWZ0Iiwib2Zmc2V0TGVmdCIsInRvcCIsIm9mZnNldFRvcCIsInJlZmVyZW5jZSIsIm9mZnNldFBhcmVudCIsImdldFJlbGF0aXZlQ29vcmRpbmF0ZXNWIiwiY2xlYXJJbnRlcnZhbCIsInJvdW5kIiwiZHVyYXRpb24iLCJwbGF5QnRuU3dpdGNoIiwicGF1c2VkIiwicGxheSIsIndpZHRoIiwicGF1c2UiLCJvZmZzZXRXaWR0aCIsIm11dGVkIiwiaGVpZ2h0Iiwidm9sdW1lIiwiU2hhcmUiLCJ2a29udGFrdGUiLCJwdXJsIiwicHRpdGxlIiwicGltZyIsInRleHQiLCJ1cmwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJwb3B1cCIsImZhY2Vib29rIiwidHdpdHRlciIsIm9wZW4iLCJwcm9kdWN0QnRucyIsIkFycmF5IiwiZnJvbSIsInByb2R1Y3RUYWJzIiwicHJvZHVjdFJldmlldyIsInJldmlld0NsaWNrIiwibWFwIiwidGFiIiwiaWQiLCJidG4iLCJhY2NCdG5zIiwiYWNjVGFicyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBQUEsU0FBQUMsU0FBQUMsaUJBQUEsZ0JBQUEsRUFDQUMsYUFBQUYsU0FBQUMsaUJBQUEsc0JBQUEsRUFDQUUsa0JBQUFILFNBQUFDLGlCQUFBLDRCQUFBLEVDRkFHLFVESUEsRUFBQUwsU0FBQU0sU0FDQU4sU0FBQU8sUUFB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SUFBQSwwQkFBQSxDQUVBLENBQUEsQ0FDQSxDQUVBMkYsZUFDQUEsY0FBQTFGLGlCQUFBLFFBQUEsV0FDQTJGLFlBQUFGLFlBQUFILFdBQUEsQ0FDQSxDQUFBLEVBR0FBLFlBQUFNLElBQUEsSUFDQUcsRUFBQS9GLGlCQUFBLFFBQUEsV0FDQXlGLFlBQUFHLElBQUEsSUFDQUMsRUFBQS9GLFVBQUFJLE9BQUEsNEJBQUEsRUFDQTZGLEVBQUFyRixRQUFBbUYsTUFBQUEsRUFBQUMsSUFDQUQsRUFBQS9GLFVBQUFDLElBQUEsNEJBQUEsQ0FFQSxDQUFBLEVBQ0F1RixZQUFBTSxJQUFBLElBQ0FHLEVBQUFqRyxVQUFBSSxPQUFBLDBCQUFBLEVBQ0FELEtBQUFILFVBQUFDLElBQUEsMEJBQUEsQ0FDQSxDQUFBLENBQ0EsQ0FBQSxDQUNBLENBQUEsRUFFQSxNQUFBaUcsUUFBQVQsTUFBQUMsS0FBQTVILFNBQUFDLGlCQUFBLG9CQUFBLENBQUEsRUFDQW9JLFFBQUFWLE1BQUFDLEtBQUE1SCxTQUFBQyxpQkFBQSxlQUFBLENBQUEsRUFFQW1JLFFBQUFKLElBQUEsSUFDQUcsRUFBQS9GLGlCQUFBLFFBQUEsV0FDQWlHLFFBQUFMLElBQUEsSUFDQUMsRUFBQS9GLFVBQUFDLElBQUEscUJBQUEsRUFDQWdHLEVBQUFyRixRQUFBbUYsTUFBQUEsRUFBQUMsSUFDQUQsRUFBQS9GLFVBQUFJLE9BQUEscUJBQUEsQ0FFQSxDQUFBLEVBQ0E4RixRQUFBSixJQUFBLElBQ0FHLEVBQUFqRyxVQUFBSSxPQUFBLDBCQUFBLEVBQ0FELEtBQUFILFVBQUFDLElBQUEsMEJBQUEsQ0FDQSxDQUFBLENBQ0EsQ0FBQSxDQUNBLENBQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBheW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5iaWxsaW5nLXJhZGlvXCIpO1xyXG5jb25zdCBiaWxsaW5nRm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJpbGxpbmctcmFkaW9fX2Zvcm1cIik7XHJcbmNvbnN0IGJpbGxpbmdGb3Jtc0l0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5iaWxsaW5nLXJhZGlvX19mb3JtIGlucHV0XCIpO1xyXG5cclxuaWYgKHBheW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICBwYXltZW50cy5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgbGV0IHJhZGlvID0gZWwucXVlcnlTZWxlY3RvcihcIi5jdXN0b20tcmFkaW9fX2lucHV0XCIpO1xyXG4gICAgbGV0IGZvcm0gPSBlbC5xdWVyeVNlbGVjdG9yKFwiLmJpbGxpbmctcmFkaW9fX2Zvcm1cIik7XHJcbiAgICBsZXQgaW5wdXRzID0gZWwucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpO1xyXG5cclxuICAgIHJhZGlvLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGJpbGxpbmdGb3Jtcy5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgfSk7XHJcbiAgICAgIGZvcm0uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG5cclxuICAgICAgYmlsbGluZ0Zvcm1zSXRlbXMuZm9yRWFjaCgoZWwpID0+IHtcclxuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoXCJmb3JtXCIpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlucHV0cy5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShcImZvcm1cIiwgXCJiaWxsaW5nLWZvcm1cIik7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICB9KTtcclxuXHJcbiAgcGF5bWVudHNbMF0ucXVlcnlTZWxlY3RvcihcIi5jdXN0b20tcmFkaW9fX2lucHV0XCIpLmNsaWNrKCk7XHJcbn1cclxuIiwiY29uc3QgY1NlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmN1c3RvbS1zZWxlY3RcIik7XHJcblxyXG5jU2VsZWN0cy5mb3JFYWNoKChjU2VsZWN0KSA9PiB7XHJcbiAgbGV0IHNlbGVjdCA9IGNTZWxlY3QucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICBsZXQgb3B0aW9ucyA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKFwib3B0aW9uXCIpO1xyXG5cclxuICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIik7XHJcbiAgYS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImN1c3RvbS1zZWxlY3RfX3NlbGVjdGVkXCIpO1xyXG4gIGNTZWxlY3QuYXBwZW5kQ2hpbGQoYSk7XHJcbiAgbGV0IG5ld1NlbGVjdCA9IGNTZWxlY3QucXVlcnlTZWxlY3RvcihcIi5jdXN0b20tc2VsZWN0X19zZWxlY3RlZFwiKTtcclxuXHJcbiAgbGV0IGIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpO1xyXG4gIGIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjdXN0b20tc2VsZWN0X19pdGVtc1wiKTtcclxuICBjU2VsZWN0LmFwcGVuZENoaWxkKGIpO1xyXG4gIGxldCBuZXdPcHRpb25zV3JhcCA9IGNTZWxlY3QucXVlcnlTZWxlY3RvcihcIi5jdXN0b20tc2VsZWN0X19pdGVtc1wiKTtcclxuXHJcbiAgbGV0IGkgPSAwO1xyXG4gIG9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB7XHJcbiAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIik7XHJcbiAgICBhLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY3VzdG9tLXNlbGVjdF9faXRlbVwiKTtcclxuICAgIGEuc2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiLCBpKyspO1xyXG4gICAgYS5pbm5lckhUTUwgPSBvcHRpb24uaW5uZXJIVE1MO1xyXG4gICAgbmV3T3B0aW9uc1dyYXAuYXBwZW5kQ2hpbGQoYSk7XHJcbiAgfSk7XHJcblxyXG4gIGxldCBuZXdPcHRpb25zID0gbmV3T3B0aW9uc1dyYXAucXVlcnlTZWxlY3RvckFsbChcIi5jdXN0b20tc2VsZWN0X19pdGVtXCIpO1xyXG5cclxuICBsZXQgaiA9IDA7XHJcbiAgb3B0aW9ucy5mb3JFYWNoKChvcHRpb24pID0+IHtcclxuICAgIGlmIChvcHRpb24uc2VsZWN0ZWQgPT0gdHJ1ZSkge1xyXG4gICAgICBuZXdPcHRpb25zW2pdLmNsYXNzTGlzdC5hZGQoXCJjdXN0b20tc2VsZWN0X19pdGVtX2lzLXNlbGVjdGVkXCIpO1xyXG4gICAgICBhLmlubmVySFRNTCA9IG9wdGlvbnNbal0uaW5uZXJIVE1MO1xyXG4gICAgfVxyXG4gICAgaisrO1xyXG4gIH0pO1xyXG5cclxuICBuZXdTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNTZWxlY3RzLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgIGlmIChlbC5xdWVyeVNlbGVjdG9yKFwiLmN1c3RvbS1zZWxlY3RfX3NlbGVjdGVkXCIpICE9PSB0aGlzKSB7XHJcbiAgICAgICAgZWwucXVlcnlTZWxlY3RvcihcIi5jdXN0b20tc2VsZWN0X19zZWxlY3RlZFwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiY3VzdG9tLXNlbGVjdF9fc2VsZWN0ZWRfaXMtb3BlblwiKTtcclxuICAgICAgICBlbC5xdWVyeVNlbGVjdG9yKFwiLmN1c3RvbS1zZWxlY3RfX2l0ZW1zXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJjdXN0b20tc2VsZWN0X19pdGVtc19pcy1vcGVuXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJjdXN0b20tc2VsZWN0X19zZWxlY3RlZF9pcy1vcGVuXCIpO1xyXG4gICAgdGhpcy5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnRvZ2dsZShcImN1c3RvbS1zZWxlY3RfX2l0ZW1zX2lzLW9wZW5cIik7XHJcbiAgfSk7XHJcblxyXG4gIG5ld09wdGlvbnNXcmFwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImN1c3RvbS1zZWxlY3RfX2l0ZW1cIikpIHtcclxuICAgICAgbGV0IHZhbHVlID0gZS50YXJnZXQuaW5uZXJIVE1MO1xyXG4gICAgICBuZXdTZWxlY3QuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgICAgIGxldCBpbmRleCA9IGUudGFyZ2V0LmRhdGFzZXQuaW5kZXg7XHJcbiAgICAgIG9wdGlvbnNbaW5kZXhdLnNlbGVjdGVkID0gXCJzZWxlY3RlZFwiO1xyXG5cclxuICAgICAgbmV3T3B0aW9ucy5mb3JFYWNoKChuZXdPcHRpb24pID0+IHtcclxuICAgICAgICBuZXdPcHRpb24uY2xhc3NMaXN0LnJlbW92ZShcImN1c3RvbS1zZWxlY3RfX2l0ZW1faXMtc2VsZWN0ZWRcIik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZChcImN1c3RvbS1zZWxlY3RfX2l0ZW1faXMtc2VsZWN0ZWRcIik7XHJcbiAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZShcImN1c3RvbS1zZWxlY3RfX2l0ZW1zX2lzLW9wZW5cIik7XHJcbiAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUucHJldmlvdXNFbGVtZW50U2libGluZy5jbGFzc0xpc3QucmVtb3ZlKFwiY3VzdG9tLXNlbGVjdF9fc2VsZWN0ZWRfaXMtb3BlblwiKTtcclxuICAgIH1cclxuICB9KTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoXCIuY3VzdG9tLXNlbGVjdFwiKSkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jdXN0b20tc2VsZWN0XCIpLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoXCIuY3VzdG9tLXNlbGVjdF9fc2VsZWN0ZWRcIikuY2xhc3NMaXN0LnJlbW92ZShcImN1c3RvbS1zZWxlY3RfX3NlbGVjdGVkX2lzLW9wZW5cIik7XHJcbiAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoXCIuY3VzdG9tLXNlbGVjdF9faXRlbXNcIikuY2xhc3NMaXN0LnJlbW92ZShcImN1c3RvbS1zZWxlY3RfX2l0ZW1zX2lzLW9wZW5cIik7XHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG4iLCIvLyBIdW1idXJnZXJcclxuY29uc3QgaHVtYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaHVtYlwiKTtcclxuY29uc3QgdG9wbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b3BuYXZcIik7XHJcbmh1bWIub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICBodW1iLmNsYXNzTGlzdC50b2dnbGUoXCJodW1iX2lzLW9wZW5cIik7XHJcbiAgdG9wbmF2LmNsYXNzTGlzdC50b2dnbGUoXCJ0b3BuYXZfaXMtb3BlblwiKTtcclxufTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gIGlmICghZS50YXJnZXQuY2xvc2VzdChcIi5oZWFkZXJcIikgJiYgIWUudGFyZ2V0LmNsb3Nlc3QoXCIuaHVtYlwiKSkge1xyXG4gICAgaHVtYi5jbGFzc0xpc3QucmVtb3ZlKFwiaHVtYl9pcy1vcGVuXCIpO1xyXG4gICAgdG9wbmF2LmNsYXNzTGlzdC5yZW1vdmUoXCJ0b3BuYXZfaXMtb3BlblwiKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gU2VhcmNoXHJcbmNvbnN0IHNlYXJjaEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLWljb25cIik7XHJcbmNvbnN0IHNlYXJjaENyb3NzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtaWNvbl9fY3Jvc3NcIik7XHJcbmNvbnN0IHNlYXJjaFN2ZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLWljb25fX3N2Z1wiKTtcclxuY29uc3Qgc2VhcmNoRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlci1zZWFyY2hcIik7XHJcblxyXG5zZWFyY2hCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICBzZWFyY2hGaWVsZC5jbGFzc0xpc3QudG9nZ2xlKFwiaGVhZGVyLXNlYXJjaF9hY3RpdmVcIik7XHJcbiAgc2VhcmNoQ3Jvc3MuY2xhc3NMaXN0LnRvZ2dsZShcInNlYXJjaC1pY29uX19jcm9zc19hY3RpdmVcIik7XHJcbiAgc2VhcmNoU3ZnLmNsYXNzTGlzdC50b2dnbGUoXCJzZWFyY2gtaWNvbl9fc3ZnX2hpZGRlblwiKTtcclxufTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gIGlmICghZS50YXJnZXQuY2xvc2VzdChcIi5oZWFkZXItc2VhcmNoXCIpICYmICFlLnRhcmdldC5jbG9zZXN0KFwiLnNlYXJjaC1pY29uXCIpKSB7XHJcbiAgICBzZWFyY2hGaWVsZC5jbGFzc0xpc3QucmVtb3ZlKFwiaGVhZGVyLXNlYXJjaF9hY3RpdmVcIik7XHJcbiAgICBzZWFyY2hDcm9zcy5jbGFzc0xpc3QucmVtb3ZlKFwic2VhcmNoLWljb25fX2Nyb3NzX2FjdGl2ZVwiKTtcclxuICAgIHNlYXJjaFN2Zy5jbGFzc0xpc3QucmVtb3ZlKFwic2VhcmNoLWljb25fX3N2Z19oaWRkZW5cIik7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIFN1Ym1lbnVcclxuY29uc3Qgc3ViTWVudXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvcG5hdl9faXRlbV9oYXMtc3VibWVudVwiKTtcclxuc3ViTWVudXMuZm9yRWFjaCgoc3ViTWVudSkgPT4ge1xyXG4gIGxldCBzdWJNZW51QnRuID0gc3ViTWVudS5xdWVyeVNlbGVjdG9yKFwiLnN1Ym1lbnUtdG9nZ2xlXCIpO1xyXG4gIGxldCBtZW51ID0gc3ViTWVudS5xdWVyeVNlbGVjdG9yKFwiLnRvcG5hdl9fc3VibWVudVwiKTtcclxuICBzdWJNZW51QnRuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBzdWJNZW51QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJzdWJtZW51LXRvZ2dsZV9vcGVuXCIpO1xyXG4gICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKFwidG9wbmF2X19zdWJtZW51X2lzLW9wZW5cIik7XHJcbiAgfTtcclxufSk7XHJcblxyXG4vLyBDbG9zZSBhbGwgb24gcmVzaXplXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsICgpID0+IHtcclxuICBzdWJNZW51cy5mb3JFYWNoKChzdWJNZW51KSA9PiB7XHJcbiAgICBsZXQgc3ViTWVudUJ0biA9IHN1Yk1lbnUucXVlcnlTZWxlY3RvcihcIi5zdWJtZW51LXRvZ2dsZVwiKTtcclxuICAgIGxldCBtZW51ID0gc3ViTWVudS5xdWVyeVNlbGVjdG9yKFwiLnRvcG5hdl9fc3VibWVudVwiKTtcclxuICAgIHN1Yk1lbnVCdG4uY2xhc3NMaXN0LnJlbW92ZShcInN1Ym1lbnUtdG9nZ2xlX29wZW5cIik7XHJcbiAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJ0b3BuYXZfX3N1Ym1lbnVfaXMtb3BlblwiKTtcclxuICB9KTtcclxuICBodW1iLmNsYXNzTGlzdC5yZW1vdmUoXCJodW1iX2lzLW9wZW5cIik7XHJcbiAgdG9wbmF2LmNsYXNzTGlzdC5yZW1vdmUoXCJ0b3BuYXZfaXMtb3BlblwiKTtcclxufSk7XHJcbiIsImNvbnN0IHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyXCIpO1xyXG5jb25zdCBwbGF5ZXJQbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXJfX3BsYXlcIik7XHJcbmNvbnN0IHBsYXllclBsYXlTVkcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllcl9fcGxheS1zdmdcIik7XHJcbmNvbnN0IHBsYXllclBhdXNlU1ZHID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXJfX3BhdXNlLXN2Z1wiKTtcclxuY29uc3QgcGxheWVyQ3VycmVudFRpbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllcl9fY3VycmVudC10aW1lXCIpO1xyXG5jb25zdCBwbGF5ZXJQbGF5VGltZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxheWVyX19wbGF5LXRpbWVcIik7XHJcbmNvbnN0IHBsYXllclByb2dyZXNzQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXJfX3Byb2dyZXNzLWJhclwiKTtcclxuY29uc3QgcGxheWVyUHJvZ3Jlc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllcl9fcHJvZ3Jlc3NcIik7XHJcblxyXG5jb25zdCBwbGF5ZXJWb2x1bWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllcl9fdm9sdW1lXCIpO1xyXG5jb25zdCBwbGF5ZXJWb2x1bWVTVkcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllcl9fdm9sdW1lLXN2Z1wiKTtcclxuY29uc3QgcGxheWVyVm9sdW1lTXV0ZWRTVkcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllcl9fdm9sdW1lX211dGVkLXN2Z1wiKTtcclxuY29uc3QgcGxheWVyVm9sdW1lQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXJfX3ZvbHVtZS1iYXJcIik7XHJcbmNvbnN0IHBsYXllclZvbHVtZVZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXJfX3ZvbHVtZS12YWx1ZVwiKTtcclxuXHJcbmlmIChwbGF5ZXIpIHtcclxuICBsZXQgY3VycmVudFRpbWUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7fSwgNTAwKTtcclxuICBjbGVhckludGVydmFsKGN1cnJlbnRUaW1lKTtcclxuXHJcbiAgcGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRtZXRhZGF0YVwiLCBmdW5jdGlvbiBnZXRUaW1lKCkge1xyXG4gICAgcGxheWVyUGxheVRpbWUuaW5uZXJIVE1MID0gdGltZVByZXR0aWVyKE1hdGgucm91bmQocGxheWVyLmR1cmF0aW9uKSk7XHJcbiAgfSk7XHJcblxyXG4gIHBsYXllci5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgcGxheWVyUGxheVNWRy5jbGFzc0xpc3QuYWRkKFwicGxheWVyX19wbGF5LXN2Z19pcy1hY3RpdmVcIik7XHJcbiAgICBwbGF5ZXJQYXVzZVNWRy5jbGFzc0xpc3QucmVtb3ZlKFwicGxheWVyX19wYXVzZS1zdmdfaXMtYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiB0aW1lUHJldHRpZXIodGltZSkge1xyXG4gICAgbGV0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRpbWUgLyA2MCk7XHJcbiAgICBpZiAobWludXRlcy50b1N0cmluZygpLmxlbmd0aCA9PSAxKSBtaW51dGVzID0gXCIwXCIgKyBtaW51dGVzO1xyXG4gICAgbGV0IHNlY29uZHMgPSB0aW1lIC0gbWludXRlcyAqIDYwO1xyXG4gICAgaWYgKHNlY29uZHMudG9TdHJpbmcoKS5sZW5ndGggPT0gMSkgc2Vjb25kcyA9IFwiMFwiICsgc2Vjb25kcztcclxuICAgIHJldHVybiBtaW51dGVzICsgXCI6XCIgKyBzZWNvbmRzO1xyXG4gIH1cclxuXHJcbiAgcGxheWVyUGxheS5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gcGxheUJ0blN3aXRjaCgpIHtcclxuICAgICAgcGxheWVyUGxheVNWRy5jbGFzc0xpc3QudG9nZ2xlKFwicGxheWVyX19wbGF5LXN2Z19pcy1hY3RpdmVcIik7XHJcbiAgICAgIHBsYXllclBhdXNlU1ZHLmNsYXNzTGlzdC50b2dnbGUoXCJwbGF5ZXJfX3BhdXNlLXN2Z19pcy1hY3RpdmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHBsYXllci5wYXVzZWQpIHtcclxuICAgICAgcGxheWVyLnBsYXkoKTtcclxuICAgICAgcGxheUJ0blN3aXRjaCgpO1xyXG4gICAgICBjdXJyZW50VGltZSA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICBsZXQgdGltZSA9IE1hdGgucm91bmQocGxheWVyLmN1cnJlbnRUaW1lKTtcclxuICAgICAgICBwbGF5ZXJDdXJyZW50VGltZS5pbm5lckhUTUwgPSB0aW1lUHJldHRpZXIodGltZSk7XHJcblxyXG4gICAgICAgIHBsYXllclByb2dyZXNzLnN0eWxlLndpZHRoID0gdGltZSAvIChwbGF5ZXIuZHVyYXRpb24gLyAxMDApICsgXCIlXCI7XHJcbiAgICAgIH0sIDUwMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBwbGF5ZXIucGF1c2UoKTtcclxuICAgICAgcGxheUJ0blN3aXRjaCgpO1xyXG4gICAgICBjbGVhckludGVydmFsKGN1cnJlbnRUaW1lKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBwbGF5ZXJQcm9ncmVzc0Jhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIHBsYXllclByb2dyZXNzLnN0eWxlLndpZHRoID0gZ2V0UmVsYXRpdmVDb29yZGluYXRlcyhlLCBlLnRhcmdldCkgKyBcInB4XCI7XHJcbiAgICBwbGF5ZXIuY3VycmVudFRpbWUgPSAocGxheWVyLmR1cmF0aW9uIC8gMTAwKSAqIChnZXRSZWxhdGl2ZUNvb3JkaW5hdGVzKGUsIGUudGFyZ2V0KSAvIChwbGF5ZXJQcm9ncmVzc0Jhci5vZmZzZXRXaWR0aCAvIDEwMCkpO1xyXG4gICAgbGV0IHRpbWUgPSBNYXRoLnJvdW5kKHBsYXllci5jdXJyZW50VGltZSk7XHJcbiAgICBwbGF5ZXJDdXJyZW50VGltZS5pbm5lckhUTUwgPSB0aW1lUHJldHRpZXIodGltZSk7XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIGdldFJlbGF0aXZlQ29vcmRpbmF0ZXMoZXZlbnQsIHJlZmVyZW5jZUVsZW1lbnQpIHtcclxuICAgIGNvbnN0IHBvc2l0aW9uID0ge1xyXG4gICAgICB4OiBldmVudC5wYWdlWCxcclxuICAgICAgeTogZXZlbnQucGFnZVksXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG9mZnNldCA9IHtcclxuICAgICAgbGVmdDogcmVmZXJlbmNlRWxlbWVudC5vZmZzZXRMZWZ0LFxyXG4gICAgICB0b3A6IHJlZmVyZW5jZUVsZW1lbnQub2Zmc2V0VG9wLFxyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgcmVmZXJlbmNlID0gcmVmZXJlbmNlRWxlbWVudC5vZmZzZXRQYXJlbnQ7XHJcblxyXG4gICAgd2hpbGUgKHJlZmVyZW5jZSkge1xyXG4gICAgICBvZmZzZXQubGVmdCArPSByZWZlcmVuY2Uub2Zmc2V0TGVmdDtcclxuICAgICAgb2Zmc2V0LnRvcCArPSByZWZlcmVuY2Uub2Zmc2V0VG9wO1xyXG4gICAgICByZWZlcmVuY2UgPSByZWZlcmVuY2Uub2Zmc2V0UGFyZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwb3NpdGlvbi54IC0gb2Zmc2V0LmxlZnQ7XHJcbiAgfVxyXG5cclxuICBwbGF5ZXJWb2x1bWUub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHBsYXllclZvbHVtZVNWRy5jbGFzc0xpc3QudG9nZ2xlKFwicGxheWVyX192b2x1bWUtc3ZnX2lzLWFjdGl2ZVwiKTtcclxuICAgIHBsYXllclZvbHVtZU11dGVkU1ZHLmNsYXNzTGlzdC50b2dnbGUoXCJwbGF5ZXJfX3ZvbHVtZV9tdXRlZC1zdmdfaXMtYWN0aXZlXCIpO1xyXG4gICAgaWYgKCFwbGF5ZXIubXV0ZWQpIHtcclxuICAgICAgcGxheWVyLm11dGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHBsYXllci5tdXRlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHBsYXllclZvbHVtZUJhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIHBsYXllclZvbHVtZVZhbHVlLnN0eWxlLmhlaWdodCA9IDcwIC0gZ2V0UmVsYXRpdmVDb29yZGluYXRlc1YoZSwgcGxheWVyVm9sdW1lQmFyKSArIFwicHhcIjtcclxuICAgIHBsYXllci52b2x1bWUgPSAxIC0gcGxheWVyVm9sdW1lVmFsdWUub2Zmc2V0VG9wIC8gKHBsYXllclZvbHVtZUJhci5vZmZzZXRUb3AgLyAxMDApIC8gLTEwMDtcclxuICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gZ2V0UmVsYXRpdmVDb29yZGluYXRlc1YoZXZlbnQsIHJlZmVyZW5jZUVsZW1lbnQpIHtcclxuICAgIGNvbnN0IHBvc2l0aW9uID0ge1xyXG4gICAgICB4OiBldmVudC5wYWdlWCxcclxuICAgICAgeTogZXZlbnQucGFnZVksXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG9mZnNldCA9IHtcclxuICAgICAgbGVmdDogcmVmZXJlbmNlRWxlbWVudC5vZmZzZXRMZWZ0LFxyXG4gICAgICB0b3A6IHJlZmVyZW5jZUVsZW1lbnQub2Zmc2V0VG9wLFxyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgcmVmZXJlbmNlID0gcmVmZXJlbmNlRWxlbWVudC5vZmZzZXRQYXJlbnQ7XHJcblxyXG4gICAgd2hpbGUgKHJlZmVyZW5jZSkge1xyXG4gICAgICBvZmZzZXQubGVmdCArPSByZWZlcmVuY2Uub2Zmc2V0TGVmdDtcclxuICAgICAgb2Zmc2V0LnRvcCArPSByZWZlcmVuY2Uub2Zmc2V0VG9wO1xyXG4gICAgICByZWZlcmVuY2UgPSByZWZlcmVuY2Uub2Zmc2V0UGFyZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwb3NpdGlvbi55IC0gb2Zmc2V0LnRvcDtcclxuICB9XHJcbn1cclxuIiwiU2hhcmUgPSB7XHJcbiAgdmtvbnRha3RlOiBmdW5jdGlvbiAocHVybCwgcHRpdGxlLCBwaW1nLCB0ZXh0KSB7XHJcbiAgICB1cmwgPSBcImh0dHA6Ly92a29udGFrdGUucnUvc2hhcmUucGhwP1wiO1xyXG4gICAgdXJsICs9IFwidXJsPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHB1cmwpO1xyXG4gICAgdXJsICs9IFwiJnRpdGxlPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHB0aXRsZSk7XHJcbiAgICB1cmwgKz0gXCImZGVzY3JpcHRpb249XCIgKyBlbmNvZGVVUklDb21wb25lbnQodGV4dCk7XHJcbiAgICB1cmwgKz0gXCImaW1hZ2U9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocGltZyk7XHJcbiAgICB1cmwgKz0gXCImbm9wYXJzZT10cnVlXCI7XHJcbiAgICBTaGFyZS5wb3B1cCh1cmwpO1xyXG4gIH0sXHJcbiAgZmFjZWJvb2s6IGZ1bmN0aW9uIChwdXJsLCBwdGl0bGUsIHBpbWcsIHRleHQpIHtcclxuICAgIHVybCA9IFwiaHR0cDovL3d3dy5mYWNlYm9vay5jb20vc2hhcmVyLnBocD9zPTEwMFwiO1xyXG4gICAgdXJsICs9IFwiJnBbdGl0bGVdPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHB0aXRsZSk7XHJcbiAgICB1cmwgKz0gXCImcFtzdW1tYXJ5XT1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0ZXh0KTtcclxuICAgIHVybCArPSBcIiZwW3VybF09XCIgKyBlbmNvZGVVUklDb21wb25lbnQocHVybCk7XHJcbiAgICB1cmwgKz0gXCImcFtpbWFnZXNdWzBdPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBpbWcpO1xyXG4gICAgU2hhcmUucG9wdXAodXJsKTtcclxuICB9LFxyXG4gIHR3aXR0ZXI6IGZ1bmN0aW9uIChwdXJsLCBwdGl0bGUpIHtcclxuICAgIHVybCA9IFwiaHR0cDovL3R3aXR0ZXIuY29tL3NoYXJlP1wiO1xyXG4gICAgdXJsICs9IFwidGV4dD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwdGl0bGUpO1xyXG4gICAgdXJsICs9IFwiJnVybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwdXJsKTtcclxuICAgIHVybCArPSBcIiZjb3VudHVybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwdXJsKTtcclxuICAgIFNoYXJlLnBvcHVwKHVybCk7XHJcbiAgfSxcclxuXHJcbiAgcG9wdXA6IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgIHdpbmRvdy5vcGVuKHVybCwgXCJcIiwgXCJ0b29sYmFyPTAsc3RhdHVzPTAsd2lkdGg9NjI2LGhlaWdodD00MzZcIik7XHJcbiAgfSxcclxufTtcclxuIiwiY29uc3QgcHJvZHVjdEJ0bnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvZHVjdC10YWJzX19idG5cIikpO1xyXG5jb25zdCBwcm9kdWN0VGFicyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9kdWN0LWRlc2NyX19pdGVtXCIpKTtcclxuY29uc3QgcHJvZHVjdFJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmF0aW5nX19saW5rXCIpO1xyXG5cclxuZnVuY3Rpb24gcmV2aWV3Q2xpY2socHJvZHVjdFRhYnMsIHByb2R1Y3RCdG5zKSB7XHJcbiAgcHJvZHVjdFRhYnMubWFwKCh0YWIpID0+IHtcclxuICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKFwicHJvZHVjdC1kZXNjcl9faXRlbV9hY3RpdmVcIik7XHJcbiAgICBpZiAodGFiLmlkID09PSBcInJldmlld1wiKSB7XHJcbiAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKFwicHJvZHVjdC1kZXNjcl9faXRlbV9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcHJvZHVjdEJ0bnMubWFwKChidG4pID0+IHtcclxuICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwicHJvZHVjdC10YWJzX19idG5fYWN0aXZlXCIpO1xyXG4gICAgaWYgKGJ0bi5kYXRhc2V0LnRhYiA9PT0gXCJyZXZpZXdcIikge1xyXG4gICAgICBidG4uY2xhc3NMaXN0LmFkZChcInByb2R1Y3QtdGFic19fYnRuX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuaWYgKHByb2R1Y3RSZXZpZXcpIHtcclxuICBwcm9kdWN0UmV2aWV3LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXZpZXdDbGljayhwcm9kdWN0VGFicywgcHJvZHVjdEJ0bnMpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5wcm9kdWN0QnRucy5tYXAoKGJ0bikgPT4ge1xyXG4gIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgcHJvZHVjdFRhYnMubWFwKCh0YWIpID0+IHtcclxuICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoXCJwcm9kdWN0LWRlc2NyX19pdGVtX2FjdGl2ZVwiKTtcclxuICAgICAgaWYgKGJ0bi5kYXRhc2V0LnRhYiA9PT0gdGFiLmlkKSB7XHJcbiAgICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoXCJwcm9kdWN0LWRlc2NyX19pdGVtX2FjdGl2ZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBwcm9kdWN0QnRucy5tYXAoKGJ0bikgPT4ge1xyXG4gICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcInByb2R1Y3QtdGFic19fYnRuX2FjdGl2ZVwiKTtcclxuICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwicHJvZHVjdC10YWJzX19idG5fYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgYWNjQnRucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hY2NvdW50LXRhYnNfX2J0blwiKSk7XHJcbmNvbnN0IGFjY1RhYnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWNjb3VudC1pdGVtXCIpKTtcclxuXHJcbmFjY0J0bnMubWFwKChidG4pID0+IHtcclxuICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIGFjY1RhYnMubWFwKCh0YWIpID0+IHtcclxuICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoXCJhY2NvdW50LWl0ZW1faGlkZGVuXCIpO1xyXG4gICAgICBpZiAoYnRuLmRhdGFzZXQudGFiID09PSB0YWIuaWQpIHtcclxuICAgICAgICB0YWIuY2xhc3NMaXN0LnJlbW92ZShcImFjY291bnQtaXRlbV9oaWRkZW5cIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgYWNjQnRucy5tYXAoKGJ0bikgPT4ge1xyXG4gICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImFjY291bnQtdGFic19fYnRuX2FjdGl2ZVwiKTtcclxuICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwiYWNjb3VudC10YWJzX19idG5fYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXX0=
